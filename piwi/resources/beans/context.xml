<?xml version="1.0" encoding="UTF-8"?>
<context xmlns="http://piwi.googlecode.com/xsd/context" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://piwi.googlecode.com/xsd/context ../xsd/context.xsd">

	<bean id="site" class="Site" scope="request">
        <property name="contentPath" php="$GLOBALS['PIWI_ROOT'] . CONTENT_PATH" />
        <property name="templatesPath" php="$GLOBALS['PIWI_ROOT'] . TEMPLATES_PATH" />
        <property name="siteFilename" value="site.xml" />
    </bean>
    
    <!-- TODO SiteSelector should take lists, for example: wiki = WikiSite, xml = xmlPage and so on -->
    <bean id="siteSelector" class="SiteSelector" scope="request">
    	<property name="site" ref="site" />
    </bean>    
    
    <bean id="streamingPage" class="StreamingPage" scope="request">
    	<property name="streamingFilePath" php="$GLOBALS['PIWI_ROOT'] . CONTENT_PATH . '/streams.xml'" />
    	<property name="site" ref="site" />
    </bean>
    
    <bean id="xmlPage" class="XMLPage" scope="request">
        <property name="contentPath" php="$GLOBALS['PIWI_ROOT'] . CONTENT_PATH" />
        <property name="site" ref="site" />
    </bean>
    
    <bean id="configurationManager" class="ConfigurationManager" scope="request">
        <property name="configFilePath" php="$GLOBALS['PIWI_ROOT'] . CONTENT_PATH . '/config.xml'" />
    </bean>
    
    <bean id="formFactory" class="FormFactory" scope="request">
        <property name="formsXMLPath" php="$GLOBALS['PIWI_ROOT'] . CONTENT_PATH . '/forms.xml'" />
    </bean>
    
   	<bean id="formProcessor" class="FormProcessor" scope="request" />
    
    <bean id="connectorFactory" class="ConnectorFactory" scope="request">
        <property name="connectorsXMLPath" php="$GLOBALS['PIWI_ROOT'] . CONTENT_PATH . '/connectors.xml'" />
    </bean>
    
    <bean id="generatorFactory" class="GeneratorFactory" scope="request">
        <property name="generatorsXMLPath" php="$GLOBALS['PIWI_ROOT'] . CONTENT_PATH . '/generators.xml'" />
    </bean>
</context>