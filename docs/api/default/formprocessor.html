<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>

<meta name="generator" content="PHPDoctor 2RC2 (http://phpdoctor.sourceforge.net/)">

<link rel="stylesheet" type="text/css" href="../stylesheet.css">
<link rel="start" href="../overview-summary.html">

<title>FormProcessor (Piwi - XML Transformation Framework)</title>

</head>
<body id="definition" onload="parent.document.title=document.title;">

<div class="header">
<h1>Piwi - XML Transformation Framework</h1>
<ul>
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="../default/package-summary.html">Package</a></li>
<li class="active">Class</li>
<li><a href="../default/package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../index.html" target="_top">Frames</a>
<a href="../default/formprocessor.html" target="_top">No frames</a>
</div>
<div class="small_links">
Summary: <a href="#summary_field">Field</a> | <a href="#summary_method">Method</a> | <a href="#summary_constr">Constr</a>
Detail: <a href="#detail_field">Field</a> | <a href="#detail_method">Method</a> | <a href="#summary_constr">Constr</a>
</div>
<hr>

<div class="qualifiedName">default.FormProcessor</div>

<h1>Class FormProcessor</h1>

<pre class="tree"><strong>FormProcessor</strong><br /></pre>

<hr>

<p class="signature">public  class <strong>FormProcessor</strong></p>

<div class="comment" id="overview_description"><p>
Processes forms specified as PiwiForms.
Forms can contain multiple steps (wizards).
The values entered by a user can be verified by using Validators.
It is also possible to handle multiple forms on one page.
/</p></div>

<hr>

<table id="summary_field">
<tr><th colspan="2">Field Summary</th></tr>
<tr>
<td class="type">private  mixed</td>
<td class="description"><p class="name"><a href="#currentStep">$currentStep</a></p><p class="description">The current step of the currently processed form. </p></td>
</tr>
<tr>
<td class="type">private  mixed</td>
<td class="description"><p class="name"><a href="#formFactory">$formFactory</a></p><p class="description">Injected FormFactory */</p></td>
</tr>
<tr>
<td class="type">private  mixed</td>
<td class="description"><p class="name"><a href="#formId">$formId</a></p><p class="description">The id of the currently processed form. </p></td>
</tr>
<tr>
<td class="type">private  mixed</td>
<td class="description"><p class="name"><a href="#ignoredFields">$ignoredFields</a></p><p class="description">Array of the names of all fields in the current form that should be rejected from hidden fields. </p></td>
</tr>
<tr>
<td class="type">private  mixed</td>
<td class="description"><p class="name"><a href="#logger">$logger</a></p></td>
</tr>
<tr>
<td class="type">private  mixed</td>
<td class="description"><p class="name"><a href="#numberOfSteps">$numberOfSteps</a></p><p class="description">The total number of steps of the currently processed form. </p></td>
</tr>
<tr>
<td class="type">private  mixed</td>
<td class="description"><p class="name"><a href="#processor">$processor</a></p><p class="description">The XSLTProcessor. </p></td>
</tr>
<tr>
<td class="type">private  mixed</td>
<td class="description"><p class="name"><a href="#validate">$validate</a></p><p class="description">True if validation has to be performed, otherwise false. </p></td>
</tr>
<tr>
<td class="type">private  mixed</td>
<td class="description"><p class="name"><a href="#validationFailed">$validationFailed</a></p><p class="description">Indicates that a validator of the current form failed. </p></td>
</tr>
</table>

<table id="summary_constr">
<tr><th colspan="2">Constructor Summary</th></tr>
<tr>
<td class="description"><p class="name"><a href="#FormProcessor()">FormProcessor</a>()</p><p class="description">
Constructor.
</p></td>
</tr>
</table>

<table id="summary_method">
<tr><th colspan="2">Method Summary</th></tr>
<tr>
<td class="type">private  void</td>
<td class="description"><p class="name"><a href="#_callPreProcessor()">_callPreProcessor</a>(mixed domXPath)</p><p class="description">
Calls a preprocessor defined as an attribute in the step tag.
</p></td>
</tr>
<tr>
<td class="type">private  array</td>
<td class="description"><p class="name"><a href="#_getFiles()">_getFiles</a>()</p><p class="description">
Returns an array containing all files of the currently processed form.
</p></td>
</tr>
<tr>
<td class="type">private  string</td>
<td class="description"><p class="name"><a href="#_getFilteredAttributesAsString()">_getFilteredAttributesAsString</a>(string domElement, array filterAttributes)</p><p class="description">
Returns all attribute/value-pairs of a DOMElement as a string. </p></td>
</tr>
<tr>
<td class="type">private  array</td>
<td class="description"><p class="name"><a href="#_getResults()">_getResults</a>()</p><p class="description">
Returns an array containing all results of the currently processed form.
</p></td>
</tr>
<tr>
<td class="type">private  string</td>
<td class="description"><p class="name"><a href="#_getStepXML()">_getStepXML</a>(DOMXPath domXPath)</p><p class="description">
Processes the current step of the form and returns it as XML.</p></td>
</tr>
<tr>
<td class="type">private  void</td>
<td class="description"><p class="name"><a href="#_initRequestParams()">_initRequestParams</a>()</p><p class="description">
Initializes the request parameters.
</p></td>
</tr>
<tr>
<td class="type">private  void</td>
<td class="description"><p class="name"><a href="#_initXSLTProcessor()">_initXSLTProcessor</a>()</p><p class="description">
Initializes the XSLTProcessor, if this hasn't happened before'
/</p></td>
</tr>
<tr>
<td class="type">private  boolean</td>
<td class="description"><p class="name"><a href="#_isKeyAllowedAsHiddenField()">_isKeyAllowedAsHiddenField</a>(string key)</p><p class="description">
Determines whether the given POST parameter should be included as a hidden field.</p></td>
</tr>
<tr>
<td class="type"> DOMDocument</td>
<td class="description"><p class="name"><a href="#executeStepProcessor()">executeStepProcessor</a>(array domElement)</p><p class="description">
Executes the given StepProcessor.</p></td>
</tr>
<tr>
<td class="type"> DOMDocument</td>
<td class="description"><p class="name"><a href="#executeValidator()">executeValidator</a>(array domElement)</p><p class="description">
Executes the given Validator.</p></td>
</tr>
<tr>
<td class="type"> DOMDocument</td>
<td class="description"><p class="name"><a href="#generateInput()">generateInput</a>(array domElement)</p><p class="description">
Converts the given INPUT element to PiwiXML.</p></td>
</tr>
<tr>
<td class="type"> DOMDocument</td>
<td class="description"><p class="name"><a href="#generateSelect()">generateSelect</a>(array domElement)</p><p class="description">
Converts the given SELECT element to PiwiXML.</p></td>
</tr>
<tr>
<td class="type"> DOMDocument</td>
<td class="description"><p class="name"><a href="#generateTextArea()">generateTextArea</a>(array domElement)</p><p class="description">
Converts the given TEXTAREA element to PiwiXML.</p></td>
</tr>
<tr>
<td class="type"> integer</td>
<td class="description"><p class="name"><a href="#getId()">getId</a>()</p><p class="description">Returns the id of the currently processed form. </p></td>
</tr>
<tr>
<td class="type"> boolean</td>
<td class="description"><p class="name"><a href="#isValidationFailed()">isValidationFailed</a>()</p><p class="description">
Returns if a validation has failed while processing.</p></td>
</tr>
<tr>
<td class="type"> DOMDocument</td>
<td class="description"><p class="name"><a href="#process()">process</a>(string id)</p><p class="description">
Loads the form from the given file and generates the the content as PiwiXML.</p></td>
</tr>
<tr>
<td class="type"> unknown_type</td>
<td class="description"><p class="name"><a href="#setFormFactory()">setFormFactory</a>(mixed factory, $factory )</p><p class="description">
Getter for the form factory injection</p></td>
</tr>
</table>

<h2 id="detail_field">Field Detail</h2>
<h3 id="currentStep">currentStep</h3>
<code class="signature">private  mixed <strong>$currentStep</strong></code>
<div class="details">
<p>The current step of the currently processed form. */</p></div>

<hr>

<h3 id="formFactory">formFactory</h3>
<code class="signature">private  mixed <strong>$formFactory</strong> = null</code>
<div class="details">
<p>Injected FormFactory */</p></div>

<hr>

<h3 id="formId">formId</h3>
<code class="signature">private  mixed <strong>$formId</strong> = null</code>
<div class="details">
<p>The id of the currently processed form. */</p></div>

<hr>

<h3 id="ignoredFields">ignoredFields</h3>
<code class="signature">private  mixed <strong>$ignoredFields</strong></code>
<div class="details">
<p>Array of the names of all fields in the current form that should be rejected from hidden fields. */</p></div>

<hr>

<h3 id="logger">logger</h3>
<code class="signature">private  mixed <strong>$logger</strong> = null</code>
<div class="details">
</div>

<hr>

<h3 id="numberOfSteps">numberOfSteps</h3>
<code class="signature">private  mixed <strong>$numberOfSteps</strong></code>
<div class="details">
<p>The total number of steps of the currently processed form. */</p></div>

<hr>

<h3 id="processor">processor</h3>
<code class="signature">private  mixed <strong>$processor</strong> = null</code>
<div class="details">
<p>The XSLTProcessor. */</p></div>

<hr>

<h3 id="validate">validate</h3>
<code class="signature">private  mixed <strong>$validate</strong> = true</code>
<div class="details">
<p>True if validation has to be performed, otherwise false. */</p></div>

<hr>

<h3 id="validationFailed">validationFailed</h3>
<code class="signature">private  mixed <strong>$validationFailed</strong> = false</code>
<div class="details">
<p>Indicates that a validator of the current form failed. */</p></div>

<hr>

<h2 id="detail_constr">Constructor Detail</h2>
<h3 id="FormProcessor()">FormProcessor</h3>
<code class="signature">public <strong>FormProcessor</strong>()</code>
<div class="details">
<p>
Constructor.
/</p></div>

<hr>

<h2 id="detail_method">Method Detail</h2>
<h3 id="_callPreProcessor()">_callPreProcessor</h3>
<code class="signature">private  void <strong>_callPreProcessor</strong>(mixed domXPath)</code>
<div class="details">
<p>
Calls a preprocessor defined as an attribute in the step tag.</p><p>/</p></div>

<hr>

<h3 id="_getFiles()">_getFiles</h3>
<code class="signature">private  array <strong>_getFiles</strong>()</code>
<div class="details">
<p>
Returns an array containing all files of the currently processed form.
These values are used in StepProcessors to handle posted files.</p><dl>
<dt>Returns:</dt>
<dd>Array containing all files of the currently processed form.</dd>
</dl>
</div>

<hr>

<h3 id="_getFilteredAttributesAsString()">_getFilteredAttributesAsString</h3>
<code class="signature">private  string <strong>_getFilteredAttributesAsString</strong>(string domElement, array filterAttributes)</code>
<div class="details">
<p>
Returns all attribute/value-pairs of a DOMElement as a string. Attributes can be filtered.</p><dl>
<dt>Parameters:</dt>
<dd>domElement - The DOMElement whose attributes should be processed.</dd>
<dd>filterAttributes - The names of the attributes which should be filtered.</dd>
<dt>Returns:</dt>
<dd>All attribute/value-pairs of a DOMElement as a string.</dd>
</dl>
</div>

<hr>

<h3 id="_getResults()">_getResults</h3>
<code class="signature">private  array <strong>_getResults</strong>()</code>
<div class="details">
<p>
Returns an array containing all results of the currently processed form.
These values are used in StepProcessors to display the results.
The array also contains the current step and the total number of steps in the form.</p><dl>
<dt>Returns:</dt>
<dd>Array containing all results of the currently processed form.</dd>
</dl>
</div>

<hr>

<h3 id="_getStepXML()">_getStepXML</h3>
<code class="signature">private  string <strong>_getStepXML</strong>(DOMXPath domXPath)</code>
<div class="details">
<p>
Processes the current step of the form and returns it as XML.</p><dl>
<dt>Parameters:</dt>
<dd>domXPath - The form where the step should be retrieved from.</dd>
<dt>Returns:</dt>
<dd>The current Step as XML.</dd>
</dl>
</div>

<hr>

<h3 id="_initRequestParams()">_initRequestParams</h3>
<code class="signature">private  void <strong>_initRequestParams</strong>()</code>
<div class="details">
<p>
Initializes the request parameters.</p><p>There is an issue with htmlspecialchars.
Not each serializer does expect htmlspecialchars.
/</p></div>

<hr>

<h3 id="_initXSLTProcessor()">_initXSLTProcessor</h3>
<code class="signature">private  void <strong>_initXSLTProcessor</strong>()</code>
<div class="details">
<p>
Initializes the XSLTProcessor, if this hasn't happened before'
/</p></div>

<hr>

<h3 id="_isKeyAllowedAsHiddenField()">_isKeyAllowedAsHiddenField</h3>
<code class="signature">private  boolean <strong>_isKeyAllowedAsHiddenField</strong>(string key)</code>
<div class="details">
<p>
Determines whether the given POST parameter should be included as a hidden field.</p><dl>
<dt>Parameters:</dt>
<dd>key - The key of the POST parameter.</dd>
<dt>Returns:</dt>
<dd>True if key should be added as hidden field otherwise false.</dd>
</dl>
</div>

<hr>

<h3 id="executeStepProcessor()">executeStepProcessor</h3>
<code class="signature">public  DOMDocument <strong>executeStepProcessor</strong>(array domElement)</code>
<div class="details">
<p>
Executes the given StepProcessor.</p><dl>
<dt>Parameters:</dt>
<dd>domElement - An array containing the DOMElement to convert.</dd>
<dt>Returns:</dt>
<dd>The PiwiXML of the given DOMElement as DOMDocument.</dd>
</dl>
</div>

<hr>

<h3 id="executeValidator()">executeValidator</h3>
<code class="signature">public  DOMDocument <strong>executeValidator</strong>(array domElement)</code>
<div class="details">
<p>
Executes the given Validator.</p><dl>
<dt>Parameters:</dt>
<dd>domElement - An array containing the DOMElement to convert.</dd>
<dt>Returns:</dt>
<dd>The PiwiXML of the given DOMElement as DOMDocument.</dd>
</dl>
</div>

<hr>

<h3 id="generateInput()">generateInput</h3>
<code class="signature">public  DOMDocument <strong>generateInput</strong>(array domElement)</code>
<div class="details">
<p>
Converts the given INPUT element to PiwiXML.</p><dl>
<dt>Parameters:</dt>
<dd>domElement - An array containing the DOMElement to convert.</dd>
<dt>Returns:</dt>
<dd>The PiwiXML of the given DOMElement as DOMDocument.</dd>
</dl>
</div>

<hr>

<h3 id="generateSelect()">generateSelect</h3>
<code class="signature">public  DOMDocument <strong>generateSelect</strong>(array domElement)</code>
<div class="details">
<p>
Converts the given SELECT element to PiwiXML.</p><dl>
<dt>Parameters:</dt>
<dd>domElement - An array containing the DOMElement to convert.</dd>
<dt>Returns:</dt>
<dd>The PiwiXML of the given DOMElement as DOMDocument.</dd>
</dl>
</div>

<hr>

<h3 id="generateTextArea()">generateTextArea</h3>
<code class="signature">public  DOMDocument <strong>generateTextArea</strong>(array domElement)</code>
<div class="details">
<p>
Converts the given TEXTAREA element to PiwiXML.</p><dl>
<dt>Parameters:</dt>
<dd>domElement - An array containing the DOMElement to convert.</dd>
<dt>Returns:</dt>
<dd>The PiwiXML of the given DOMElement as DOMDocument.</dd>
</dl>
</div>

<hr>

<h3 id="getId()">getId</h3>
<code class="signature">public  integer <strong>getId</strong>()</code>
<div class="details">
<p>Returns the id of the currently processed form. </p><dl>
<dt>Returns:</dt>
<dd>The id of the currently processed form.</dd>
</dl>
</div>

<hr>

<h3 id="isValidationFailed()">isValidationFailed</h3>
<code class="signature">public  boolean <strong>isValidationFailed</strong>()</code>
<div class="details">
<p>
Returns if a validation has failed while processing.</p><dl>
<dt>Returns:</dt>
<dd>True, if a validation has failed, 
 * false if everything has been processed successfully.</dd>
</dl>
</div>

<hr>

<h3 id="process()">process</h3>
<code class="signature">public  DOMDocument <strong>process</strong>(string id)</code>
<div class="details">
<p>
Loads the form from the given file and generates the the content as PiwiXML.</p><dl>
<dt>Parameters:</dt>
<dd>id - The id of the form.</dd>
<dt>Returns:</dt>
<dd>The rendered form as PiwiXML.</dd>
</dl>
</div>

<hr>

<h3 id="setFormFactory()">setFormFactory</h3>
<code class="signature">public  unknown_type <strong>setFormFactory</strong>(mixed factory, $factory )</code>
<div class="details">
<p>
Getter for the form factory injection</p></div>

<hr>

<div class="header">
<h1>Piwi - XML Transformation Framework</h1>
<ul>
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="../default/package-summary.html">Package</a></li>
<li class="active">Class</li>
<li><a href="../default/package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../index.html" target="_top">Frames</a>
<a href="../default/formprocessor.html" target="_top">No frames</a>
</div>
<div class="small_links">
Summary: <a href="#summary_field">Field</a> | <a href="#summary_method">Method</a> | <a href="#summary_constr">Constr</a>
Detail: <a href="#detail_field">Field</a> | <a href="#detail_method">Method</a> | <a href="#summary_constr">Constr</a>
</div>
<hr>

<p id="footer">This document was generated by <a href=http://phpdoctor.sourceforge.net/>PHPDoctor: The PHP Documentation Creator</a></p>

</body>

</html>